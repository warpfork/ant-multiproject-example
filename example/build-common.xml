<?xml version="1.0" encoding="ISO-8859-1"?>
<project name="build-common" default="dist"
    xmlns:if="ant:if"
    xmlns:unless="ant:unless"
    >
    <import file="dependencies.xml"/>

    <target name="clean" description="Deletes files created during the build">
        <echo message="${ant.project.name} - build-common.clean"/>
    </target>

    <target name="compile" description="Compiles source code">
        <echo message="${ant.project.name} - build-common.compile"/>
    </target>

    <target name="dist" depends="compile" description="Creates distributable">
        <echo message="${ant.project.name} - build-common.dist"/>
        <echo> lol?  ${dist.dependencies.once}</echo>
        <antcall target="dist.dependencies" unless:set="dist.dependencies.once"/>
    </target>

    <target name="clean.dependencies" 
            description="Deletes files created during the build (includes dependencies)">
        <antcall target="delegate.${ant.project.name}">
            <param name="delegate.target" value="clean"/>
        </antcall>
    </target>

    <target name="dist.dependencies"
            description="Creates distributable (includes dependencies)">
        <property name="dist.dependencies.once" value="yes"/>
        <antcall target="delegate.${ant.project.name}">
            <param name="delegate.target" value="dist"/>
            <param name="dist.dependencies.once" value="yes"/>
        </antcall>
    </target>
</project>
